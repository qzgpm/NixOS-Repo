#!/usr/bin/env bash

mapfile -t files < <(fd --extension "m3u" --type f --color=never --full-path "${XDG_MEDIA_DIR:-$HOME/Media}/Music")

selection=$(printf '%s\n' "${files[@]}" | xargs -I{} basename "{}" | dmenu -i -l 10 -p "Albums")
[[ -z "$selection" ]] && exit

for file in "${files[@]}"; do
    if [[ "$(basename "$file")" == "$selection" ]]; then
        mpv "$file" \
            --title="Now Playing" \
            --geometry=250x250 \
            --no-border \
            --autofit=25%
        break
    fi
done
