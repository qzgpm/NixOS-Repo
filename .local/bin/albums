#!/usr/bin/env bash

mapfile -t files < <(find "${XDG_MEDIA_DIR:-$HOME/Media}/Music" -type f -name "*.m3u")

selection=$(printf '%s\n' "${files[@]}" | xargs -I{} basename "{}" | dmenu -i -l 10 -p "Albums")
[[ -z "$selection" ]] && exit

for file in "${files[@]}"; do
    if [[ "$(basename "$file")" == "$selection" ]]; then
        mpv "$file" \
            --title="Now Playing" \
            --geometry=250x250 \
	    --no-border
            --autofit=25%25%
        break
    fi
done
